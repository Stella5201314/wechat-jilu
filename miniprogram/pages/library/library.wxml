<view class="page">
  <header-nav title="素材库"></header-nav>

  <view class="container">
    <view class="toolbar">
      <input class="input search-input" placeholder="搜索标题或内容（回车/点击搜索）" bindinput="onSearchInput" value="{{query}}" />
      <button class="btn-plain" bindtap="onSearch">搜索</button>
    </view>

    <view class="form-field">
      <tag-selector tags="{{tagPool}}" selected="{{selectedTags}}" bind:change="onTagChange"></tag-selector>
    </view>

    <scroll-view class="list" scroll-y="true" style="height:calc(100vh - 260rpx);">
      <block wx:for="{{materials}}" wx:key="_id">
        <material-card material="{{item}}" bind:view="onViewMaterial" bind:select="onSelectMaterial"></material-card>
      </block>

      <view style="text-align:center; padding:24rpx 0; color:var(--muted);">
        <text wx:if="{{loading}}">加载中...</text>
        <text wx:elif="{{!hasMore}}">没有更多内容</text>
      </view>
    </scroll-view>
  </view>

  <bottom-tabs current="library"></bottom-tabs>
</view>